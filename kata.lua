-- kata

trigs = trigs or {}
trigs.combat = trigs.combat or {}
trigs.defs = trigs.defs or {}

trigs.combat.kata = {
  { id = "punch_limb",
      line = "^Drawing back [hH]%a+ %a+ fist%, (%a+) punches you in the ([lr])%a+ ([al])%a+%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata punch" },
  { id = "punch_nonlimb",
      line = "^Drawing back [hH]%a+ %a+ fist%, (%a+) punches you in the ([hcg])%a+%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata punch nonlimb" },
  { id = "kick_limb",
      line = "^With a quick spin%, (%a+) kicks you in the ([lr])%a+ ([al])%a+ with [hH]%a+ %a+ foot%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata kick" },
  { id = "kick_nonlimb",
      line = "^With a quick spin%, (%a+) kicks you in the ([hcg])%a+ with [hH]%a+ %a+ foot%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata kick nonlimb" },
  { id = "hold",
      line = "^(%a+) firmly holds you in place with an iron%-strong grip%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata hold" },
  { id = "hold_symptom",
      line = "^You are held down by a full%-body grapple%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata held" },
  { id = "hold_symptom_2",
      line = "^You are grappled by (%a+)%. You must writhe to escape%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata held" },
  { id = "release",
      line = "^(%a+) releases [hH]%a+ fierce grapple on you%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata released" },
  { id = "release_2",
      line = "^(%a+) loses control of [hH]%a+ grapple on you%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata released" },
  { id = "throw",
      line = "^(%a+) swiftly grabs you and hurls you forcefully to the ground%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata thrown" },
  { id = "choke",
      line = "^With a snarl%, (%a+) clutches your throat and begins to painfully choke the life from you%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata choke" },
  { id = "choke_2",
      line = "^You gasp helplessly for breath as (%a+) continues to viciously choke you%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata choked" },
  { id = "lock_limb",
      line = "^(%a+) locks your ([lr])%a+ ([al])%a+ in a solid grapple%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata lock" },
  { id = "lock_nonlimb",
      line = "^(%a+) locks your ([hcg])%a+ in a solid grapple%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata lock nonlimb" },
  { id = "symptom_lock_limb",
      line = "^Your ([lr])%a+ ([al])%a+ is grappled by (%a+)%. You must writhe to escape%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata locked" },
  { id = "symptom_lock_nonlimb",
      line = "^Your ([hcg])%a+ is grappled by (%a+)%. You must writhe to escape%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata locked nonlimb" },
  { id = "mod_pinchnerve",
      line = "^A prickly stinging overcomes your body%, fading away into numbness%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata pinchnerve mod" },
  { id = "snap_limb",
      line = "^(%a+) applies precise pressure and burning agony shoots up your ([lr])%a+ ([al])%a+ as it snaps%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata snap" },
  { id = "snap_nonlimb",
      line = "^(%a+) applies precise pressure and burning agony shoots up your ([hcg])%a+ as it snaps%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata snap nonlimb" },
  { id = "snap_iasmos_limb",
      line = "^(%a+) applies precise pressure and burning agony shoots through your ([lr])%a+ ([al])%a+ as it snaps%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "CHECK THIS LINE" },
  { id = "snap_iasmos_nonlimb",
      line = "^(%a+) applies precise pressure and burning agony shoots through your ([hcg])%a+ as it snaps%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "CHECK THIS LINE" },
  { id = "mod_break",
      line = "^Your nose is savagely hit and breaks%, causing blood to splurt forth%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "broken nose" },
  { id = "mod_break_leg",
      line = "^Your ([lr])%a+ leg shatters under the force of the blow%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "broken leg" },
  { id = "mod_break_kneecap",
      line = "^Your ([lr])%a+ leg buckles as your kneecap emits a loud popping crack%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "cracked kneecap?" },
  { id = "mod_break_arm",
      line = "^Your ([lr])%a+ arm breaks with a loud crack%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "broken arm mod" },
  { id = "mod_break_elbow",
      line = "^Your ([lr])%a+ arm flops uselessly as your elbow emits a loud popping crack%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "cracked elbow?" },
  { id = "mod_stun",
      line = "^The force of the blow forces you to stagger backwards%, and you feel slightly dazed%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata stun mod" },
  { id = "mod_stun_2",
      line = "^You reel back%, stunned at the power of the blow%!$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata stun mod" },
  { id = "toss",
      line = "^(%a+) expertly tosses you%, sending you careening through the air away from [hH]%a+%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata toss" },
  { id = "raze",
      line = "^(%a+) thrusts a clawed fist towards you%, ripping at the air before your face%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata raze" },
  { id = "raze_shield",
      line = "^(%a+) razes your magical shield with a clawed fist%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "raze shield" },
  { id = "raze_speed",
      line = "^(%a+) razes your speed defence with a clawed fist%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "raze speed" },
  { id = "raze_rebounding",
      line = "^(%a+) razes your aura of rebounding with a clawed fist%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "raze rebounding" },
  { id = "mod_concussion",
      line = "^The massive trauma to your head has damaged your skull and brain considerably%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata concussion modifier" },
}

trigs.defs.kata = {
  { id = "ka_punch",
      line = "^Drawing back your [lr]%a+ fist%, you punch .-%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "ka punch" },
  { id = "ka_kick",
      line = "^With a quick spin%, you kick .- with your [lr]%a+ foot%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "ka kick" },
  { id = "ka_punch_miss",
      line = "^You strike out at .+%, but your fist misses by mere inches%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "ka punch miss" },
  { id = "ka_kick_miss",
      line = "^You leap into the air and kick out at .+%, but you fall short and miss%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "ka kick miss" },
  { id = "deflect",
      line = "^You prepare your ([lr])%a+ hand to deflect blows%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "kata deflect" },
  { id = "deflect_down",
      line = "^You relax your hands%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "deflect down" },
  { id = "grip",
      line = "^You concentrate on gripping tightly with your hands%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "grip" },
  { id = "grip_down",
      line = "^You relax your grip%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "relaxed grip" },
  { id = "form_over",
      line = "^You are unable to continue executing your Kata form%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "form over" },
  { id = "mo_increase",
      line = "^Your momentum increases%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "mo increase" },
  { id = "mo_decrease",
      line = "^You lose (%d) momentum%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "mo decrease" },
  { id = "form_nochange",
      line = "^You are too focused on your current forms to change them%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "can't change forms" },
  { id = "visual_kata_kill",
      line = "^Unable to withstand more punishment%, (.-) collapses and dies%.$",
      action = function (i, tbl) kata_(i, tbl) end,
      notes = "monk kill" },
}
