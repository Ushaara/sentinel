-- druidry

trigs = trigs or {}
trigs.combat = trigs.combat or {}
trigs.defs = trigs.defs or {}

trigs.combat.druidry = {
  { id = "briars",
      line = "^As you stumble through the briars%, you become entangled in the morass of vines and nettles%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "entangled" },
  { id = "dissolve",
      line = "^(%a+) dissolves the shimmering field around you%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "dissolve" },
  { id = "seedcloud",
      line = "^(%a+) gestures to the wildlife around [hH]%a+ and it spills a heady cloud of pollen and heavily%-aromatic particles around you%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "allergies rising" },
  { id = "spores",
      line = "^The tiny red mushrooms on the ground release a cloud of yellow spores%, which travel up your nose and make your eyes water%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "spores affs: hallucinations, dementia, confusion, affmsg: unknown ailment." },
  { id = "pollen",
      line = "^Small motes of yellow pollen rise up from the wildflowers around you and drift into your mouth%. Your throat begins to scratch%, forcing you to cough%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "asthma, affmsg: unknown ailment, also allergies, more in trees" },
  { id = "treelife",
      line = "^Animated branches from the trees above suddenly reach down and clutch you around the waist%, pulling you into their foliage%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "treelife" },
  { id = "treebane",
      line = "^(%a+) crosses [hH]%a+ arms and shakes [hH]%a+ head vigorously%, then points accusingly at you%. A shadow passes through the trees%, whispering your name%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "cursed by treebane" },
  { id = "treebane_2",
      line = "^The bough you%'re standing on suddenly tilts and branches forcibly hurl you out of the tree%, sending you tumbling to the forest floor%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "broken limbs if not levitating" },
  { id = "thorns",
      line = "^A vine drops down from a tree limb and lashes about your neck%, choking you as it cuts deeply into your flesh with its tiny thorns%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "~150 bleeding" },
  { id = "thorns_2",
      line = "^A vine drops down from a tree limb and lashes out at you%, cutting you deeply with its tiny thorns%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "~150 bleeding" },
  { id = "intoxicatingflower",
      line = "^A heady perfume wafts in on an errant breeze and catches somewhere in your throat%, evoking deep and distant memories from your childhood%. Intoxicated%, you stumble desperately to find the source of the profound smell%. As you rush through the forest%, various branches and plants scrape some of the allergenic pollen off your body and clothes%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "druid summon thing, removes a few allergies" },
  { id = "swarm",
      line = "^Flying insects suddenly swarm you%, covering you with tiny%, painful stings%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "paralysis, also allergies, more in trees" },
  { id = "cudgel",
      line = "^The end of (%a+)%'s cudgel forms a knotty burl and [sS]?[hH]e points it at you%. The burl pops and ruptures%, shooting a barrage of splinters into your flesh%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "damage" },
  { id = "cudgel_raise",
      line = "^Branches swoop down and lift you up into the trees%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "forced elevation change" },
  { id = "sap",
      line = "^With a grim smile%, (%a+) touches the trees and sap courses out in a thick syrup that lunges at you%, coating you in the viscid liquid%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "all actions slowed" },
  { id = "sap_symptom",
      line = "^The sticky sap coating your body causes you to move unbearably slowly%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "symptom line" },
  { id = "storm",
      line = "^A bolt of whitest lightning streaks down from the heavens and engulfs you%. You writhe and shake in noiseless agony as the pure electricity ripples over your body%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "electric damage" },
  { id = "thornlash",
      line = "^(%a+) whispers a string of sibilant syllables%, and leaves rustle in answer nearby%. S?[hH]e gestures violently at you%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "just got lashed, followed by head/limb thornlash" },
  { id = "thornlash_limb",
      line = "^A viciously thorned vine spears out from a nearby branch and lashes tightly around your ([lr])%a+ ([al])%a+%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "thornlashed limb. five will kill you" },
  { id = "thornlash_head",
      line = "^A viciously thorned vine spears out from a nearby branch and lashes tightly around your head%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "thornlashed head. five lashes will kill" },
  { id = "thornlashed_movement",
      line = "^The thorny vines rip into your flesh%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "bleeding, check this" },
  { id = "thornrend",
      line = "^(%a+) interlaces [hH]%a+ fingers together and raises [hH]%a+ locked hands above [hH]%a+ head%. Screaming out your name%, [sS]?[hH]e rips [hH]%a+ hands apart%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "ouch, bleeding" },
  { id = "thornrended_nokill?",
      line = "^The thorny vines wrapped around you viciously whipsaw back and forth%, flaying the skin from your flesh in bloody strips%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "thornrended" },
  { id = "fury",
      line = "^Deep within the ground%, an ominous rumbling shakes the earth and the trees begin to sway%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "big damage inbound" },
  { id = "fury_2",
      line = "^A shrieking wind rushes through the trees%, sending forest debris and small rocks up into the air%. Animals howl around you and the sky darkens overhead%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "get out of meld or be hit" },
  { id = "fury_3",
      line = "^Like the hand of an angry god%, nature turns against you as trees come alive and pound you with heavy branches%. Rocks and debris fly through the air%, slicing into your skin%, while the fury of the wind mixes with the angry howl of beasts%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "ouch" },
}

trigs.defs.druidry = {
  { id = "cudgel",
      line = "^Closing your eyes%, you hold out a hand and ask nature to grant you the means to protect forests%. Clenching a fist%, you feel a stirring in your palm%. Your grip tightens upon gnarled wood%, and you open your eyes to see a mystic cudgel%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "cudgel" },
  { id = "twirlcudgel",
      line = "^You twirl your cudgel before you%, bringing forth an emerald shield that surrounds you%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "deflecting ranged attack" },
  { id = "def_twirlcudgel",
      line = "^You are deflecting physical attacks%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "def line" },
  { id = "intoxicating_flower_success",
      line = "^With eyes glazed over%, (%a+) stumbles in%, leading with [hH]%a+ nose%.$",
      action = function (i, tbl) druidry_(i, tbl) end,
      notes = "summon" },
}
