-- beastmastery

trigs = trigs or {}
trigs.combat = trigs.combat or {}
trigs.defs = trigs.defs or {}

trigs.combat.beastmastery = {
  { id = "beast_minorbreath",
      line = "^(.-) rears back and unhinges [hH]%a+ jaws%, breathing (.-) at you%, and you scream (.-)%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "minorbreath" },
  { id = "beast_minorblast",
      line = "^(.-) rears back and unhinges [hH]%a+ jaws%, blasting (.-) at you%, and you scream (.-)%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "minorbreath" },
  { id = "beast_gust",
      line = "^Flapping [hH]%a+ wings furiously%, (.-) creates a gust of wind that slams into you%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "beast gust: You resist the attempt to move you|You are hurled to the (%a+)." },
  { id = "beast_kick",
      line = "^(%a+) squeezes [hH]%a+ legs around (.-)%'s body and .- immediately responds by thrusting out a hind leg and kicking your brutally in the chest%, knocking you to the ground%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "sprawl" },
  { id = "beast_sleepcloud",
      line = "^(.-) rears back and unhinges [hH]%a+ jaws%, releasing a scintillating cloud of sparkling motes%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "sleep if followed by 'Your insomnia has cleared up|FALL ASLEEP LINES'" },
  { id = "beast_amnesiacloud",
      line = "^(.-) rears back and unhinges [hH]%a+ jaws%, releasing a plume of thick%, cold fog%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "You are afflicted with amnesia." },
  { id = "beast_trample",
      line = "^(%a+) whips (.-) into a fury%, bucking and racing dangerously in a circle%, trampling the ground in a frenzy%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "followed by: ^(.-) breaks|crushes|pulveri[sz]es|smashes your (left|right) (arm|leg)%.$" },
  { id = "beast_hypgaze",
      line = "^(.-) gazes intently at you%, and you feel yourself drawn into [hH]%a+ eyes%, which swirl about in a kaleidoscopic array of swirling colours%. Your vision slowly fades into nothing but curiously floating (.-) spots%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "hypgaze: curiously floating topaz|scarlet|fuchsia|sapphire|pink|magenta|purple|lavender spots" },
  { id = "beast_spit",
      line = "^With a loud hiss%, (.-) spits a stream of foul liquid into your face%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "followed by poison lines" },
  { id = "beast_urlife",
      line = "^(.-) opens [hH]%a+ jaws and releases a rank%, putrescent blast of stale air and rotten chunks of tissue at you%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "beast ur'life: death domoth power" },
  { id = "beast_peacefulcompanion",
      line = "^(.-)%'s eyes glow a soft%, pale blue as [hH]%a+ mind brushes against your own%, soothing waves of harmony instilling peaceful thoughts%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "beast: harmony domoth power" },
  { id = "beast_scrambledwave",
      line = "^(.-)%'s eyes swirl with a panoply of eclectic colours as [hH]%a+ mind assaults your own with incoherent thoughts%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "beast: chaos domoth power, 1-4 mental affs, hypochondria shows on firstaid, others unknown ailment" },
}

trigs.defs.beastmastery = {
  { id = "summon",
      line = "^You reach out through your bond with .- and summon [hH]%a+ from the stables%. You sense [hH]%a+ answering your call%.$",
      action = function (i, tbl) beastmaster_(i, tbl) end,
      notes = "summon" },
  { id = "summoned",
      line = "^(.-) trots in with head high%, butting you gently with [hH]%a+ head%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "order to follow" },
  { id = "vault",
      line = "^You easily vault onto the back of (.-)%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "vault" },
  { id = "mounted_def",
      line = "^You are riding (.-)%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "def line" },
  { id = "unsaddled",
      line = "^You lose purchase on .-%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "unsaddled" },
  { id = "dismount_first",
      line = "^You cannot do that while mounted%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "dismount first" },
  { id = "dismount",
      line = "^You step down off of .-%.$",
      action = function (i, tbl) beastmastery_(i, tbl) end,
      notes = "dismounted" },
}
