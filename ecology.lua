-- ecology

trigs = trigs or {}
trigs.combat = trigs.combat or {}
trigs.defs = trigs.defs or {}

trigs.combat.ecology = {
  { id = "hillsmudge",
      line = "^The cloud of fragrant smoke coalesces into the scene of rolling hills silhouetted against a raging thunderstorm%. Mud begins sliding off the hills%, pounding down all around you%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "smudge: room mudslide" },
  { id = "hillsmudge_2",
      line = "^You are caught in the onslaught and go down in a wave of rolling mud%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "damage + sprawl?" },
  { id = "fetish",
      line = "^A strange bone creature leaps out of (%a+)%'s hands and attacks you%, (.-)%, then quickly returns to %a+%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "fetish single" }, -- slicing flesh with its wings|cutting deeply with a sharp fin|jabbing with a long stinger|gouging with its sharp fangs
  { id = "fetish_ranged",
      line = "^A strange bone creature flies in from the (%a+) and attacks you%, (.-)%, then quickly departs%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "fetish ranged" },
  { id = "batbane",
      line = "^Mumbling softly to [hH]%a+self%, (%a+) points a finger at you%, and you are gripped by the undulating image of a screeching bat%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "bat baned, bard damage increased for minute" },
  { id = "desertsmudge",
      line = "^The cloud of fragrant smoke coalesces into the scene of desert sand dunes%. Suddenly a sandstorm rises up over a dune and rushes down atop you%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "blind and bleed" },
  { id = "desertsmudge_2",
      line = "^The whirling sands scour your flesh%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "blind + bleed" },
  { id = "swampsmudge",
      line = "^The cloud of fragrant smoke coalesces into the scene of a verdant swamp%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "quicksand" },
  { id = "swampsmudge_2",
      line = "^You gasp in horror as you begin to sink into a patch of quicksand%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "can't move" },
  { id = "familiarsting",
      line = "^.- stabs you with a deadly stinger attached to its bone armour%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "poison" },
  { id = "valleysmudge",
      line = "^The cloud of fragrant smoke coalesces into the scene of a wide open valley%. A tornado twists across the valley%'s expanse%.",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "fling" },
  { id = "valleysmudge_2",
      line = "^You are picked up by the twister and thrown up into the sky%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "elevation change" },
  { id = "valleysmudge_3",
      line = "^You are picked up by the twister and thrown upwards%, but crash into the ceiling and fall immediately back down%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "hit roof" },
  { id = "snakebane",
      line = "^Mumbling softly to [hH]%a+self%, (%a+) points a finger at you%, and you are gripped by the undulating image of a hissing snake%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "snake baned!" },
  { id = "mountainsmudge",
      line = "^The cloud of fragrant smoke coalesces into the scene of a soaring mountain%. An ominous rumbling soon heralds an avalanche of rock that comes crashing down the mountainside%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "assuming sprawl + break" },
  { id = "mountainsmudge_2",
      line = "^You are buried under an avalanche of rock and rubble%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "see above" },
  { id = "snakebond",
      line = "^.- suddenly strikes from out of .-%'s armour%, sinking its fangs into your flesh%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "is this charybdon or the snake's own poison?" },
  { id = "herbbane",
      line = "^Mumbling softly to [hH]%a+self%, (%a+) points a finger at you%, and you are gripped by the undulating image of burning herbs%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "herb baned!" },
  { id = "forestsmudge",
      line = "^The cloud of fragrant smoke coalesces into the scene of a roaring forest fire%. Flaming branches rain down all around you%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "stun+ignite" },
  { id = "forestsmudge_2",
      line = "^A burl cracks open next to you%, covering you in burning sap%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "stun + ?" },
  { id = "berserk",
      line = "^A strange bone creature leaps out of (%a+)%'s hands and attacks you%, (.-)%, and attacks again in a frenzy%, (.-)%, then quickly returns to %a+%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "ranged berserked fetish" },
  { id = "berserk_ranged",
      line = "^A strange bone creature flies in from the (%a+) and attacks you%, (.-)%, and attacks again in a frenzy%, (.-)%, then quickly departs%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "ranged berserked fetish" },
}

trigs.defs.ecology = {
  { id = "transmigration_def",
      line = "^Your soul is bonded to an animal spirit%, ready for transmigration%.$",
      action = function (i, tbl) ecology_(i, tbl) end,
      notes = "def line" },
}
