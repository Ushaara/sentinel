-- knighthood

trigs = trigs or {}
trigs.combat = trigs.combat or {}
trigs.defs = trigs.defs or {}

trigs.combat.knighthood = {
  { id = "jab",
      line = "^(%a+) wildly jabs (.-) at you(.+)$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "untargetted jab" },
  { id = "strike",
      line = "^With a focused look%, (%a+) strikes at you with (.+)$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "focused jab" },
  { id = "swing_down",
      line = "^With a heavy overhand stroke%, (%a+) slams (.-) down upon you(.+)$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "swing head, chest" },
  { id = "swing_up",
      line = "^Letting (.-) droop%, (%a+) suddenly heaves it up at you(.+)$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "swing gut, legs" },
  { id = "swing_uppertorso",
      line = "^Flourishing (.-) above [hH]%a+ head%, (%a+) takes a swing at you(.+)$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "swing arms, chest, gut" },
  { id = "swing_torso",
      line = "^(%a+) swings [^h](.-) at you(.+)$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "swing chest, gut, arms" },
  { id = "swing_lowertorso",
      line = "^Swinging (.-) in an underhand arc%, (%a+) strikes at you(.+)$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "swing legs, gut, chest" },
  { id = "cleave_limb",
      line = "^Cleaving through your defenses%, (%a+) makes a slow%, deadly strike at your ([lr])%a+ ([al])%a+ with (.+)$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "cleave limb" },
  { id = "cleave_nonlimb",
      line = "^Cleaving through your defenses%, (%a+) makes a slow%, deadly strike at your ([hcg])%a+ with (.+)$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "cleave non limb" },
  { id = "hit_rebounding",
      line = "^.+%, but your (%a+) hits [hH]%a+ powerful aura and rebounds back into you%.(.+)%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "hit rebounding" },
  { id = "rend_leg",
      line = "^With a snarl of contempt%, (%a+) withdraws [hH]%a+ weapon from your ([lr])%a+ leg%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "rend leg" },
  { id = "rend_gut",
      line = "^With a snarl of contempt%, (%a+) withdraws [hH]%a+ weapon from your gut%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "rend gut" },
  { id = "engage",
      line = "^(%a+) moves in to engage you%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "engaged" },
  { id = "raze_rebounding",
      line = "^(%a+) razes your aura of rebounding with .-%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "def strip" },
  { id = "raze_speed",
      line = "^(%a+) razes your speed defence with .-%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "raze speed def" },
  { id = "raze_nodef",
      line = "^(%a+) whips .- through the air in front of you%, to no effect%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "raze no defs" },
}

trigs.defs.knighthood = {
  { id = "swing_light",
      line = "^You swing .- at (.-)%. You cut [hH]%a+ with a light wound%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "swing" },
  { id = "swing_messy",
      line = "^You swing .- at (.-)%. You cut [hH]%a+%, leaving a messy gash%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "less than 2/3 to go" },
  { id = "swing_deep",
      line = "^You swing .- at (.-)%. You cut [hH]%a+%, opening up deep lacerations%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "final 1/3" },
  { id = "swing_miss",
      line = "^You swing .- at (.-)%. Your weapon cuts through the air%, missing completely%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "miss" },
  { id = "swing_kill",
      line = "^The blade shears through (.-)%'s body%, coming clean through the other side with a strangely quiet swish%. S?[hH]e appears momentarily surprised%, before [hH]%a+ eyes glaze over in death and [sS]?[hH]e collapses to the ground%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "swing kill" },
  { id = "raze_noeffect",
      line = "^You whip .- through the air in front of (.-)%, to no effect%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "raze nodefs" },
  { id = "cleave",
      line = "^Cleaving through [hH]%a+ defenses%, you make a slow%, deadly strike at (.-)%'s chest with (.-)%. You plunge your %a+ into [hH]%a+%, driving it deep%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "cleave" },
  { id = "jab_kill",
      line = "^The point of the blade thrusts through (.-)%'s body and emerges from [hH]%a+ back%, jolting [hH]%a+ upright as an expression of horror crosses [hH]%a+ face%. S?[hH]e finally slides off the blade%, dropping to the ground with a thud%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "jab kill" },
  { id = "def_grip",
      line = "^Your hands are gripping your wielded items tightly%.$",
      action = function (i, tbl) knighthood_(i, tbl) end,
      notes = "def line" },
}
