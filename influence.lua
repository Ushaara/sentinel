-- influence

trigs = trigs or {}
trigs.combat = trigs.combat or {}
trigs.defs = trigs.defs or {}

trigs.combat.influence = {
  { id = "erk",
      line = '^(.-) demands of you%, %"And so%?%"$',
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "ego loss" },
  { id = "erk",
      line = '^(.-) demands of you%, %"What am I supposed to think of that%?%"$',
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "ego loss" },
  { id = "erk",
      line = '^(.-) demands of you%, %"What are you saying%?%"$',
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "ego loss" },
  { id = "erk",
      line = '^(.-) demands of you%, %"Who are you anyway%?%"$',
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "ego loss" },
  { id = "debated_passion_loss",
      line = "^(%a+) passionately presents [hH]%a+ case%, fervently arguing [hH]%a+ points with emotional appeals%. With absolutely no readily available facts upon which to analyze the argument%, you can only frown and shake your head in frustration%, conceding this emotional outburst to (%a+)%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "debate" },
  { id = "debated_pettifoggery_loss",
      line = "^Kelly unscrupulously quibbles about the smallest points in her argument, bringing up esoteric minutiae to support her radical theories. The logic of this argument is sound and you find yourself conceding to all the points raised.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "debate" },
  { id = "debate_reset",
      line = "^After a long pause in you and your interlocutor%'s dialectic%, you lose interest in the debate and let your mind drift to other things%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "debate reset" },
  { id = "visual_debate_loss",
      line = "^Face burning red%, (%a+) throws up [hH]%a+ hands in exasperation and curses loudly%, obviously too discombobulated to engage in further debate%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "visual debate loss" },
  { id = "divert_nofocus",
      line = "^(.-) is not focused on any form of influence%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "gmcp denizen in room" },
  { id = "visual_village_celest",
      line = "^(%a+) proselytizes to (.-) of how New Celest protects those who walk under the radiance of the Light%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "third party visual" },
  { id = "visual_village_celest",
      line = "^(%a+) preaches to (.-) of the great glory and goodness found by those who follow the Light%, and that New Celest is the bastion of the blessed%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "third party visual" },
  { id = "visual_village_celest",
      line = "^In a great booming voice%, (%a+) praises the beauty of the Light to (.-)%, recounting how [hH]%a+ soul may be saved by the Light and that New Celest is [hH]%a+ last%, great hope for salvation%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "third party visual" },
  { id = "visual_hallifax",
      line = "^With a mild and measured voice%, (%a+) encourages (.-) to reveal [hH]%a+ needs and wants%, then demonstrates that only in Hallifax can those demands be fulfilled%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "third party visual" },
}

trigs.defs.influence = {
  { id = "visual_open",
      line = "^(.-) blinks and shuffles about impatiently%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "open for influencing" },
  { id = "charismaticaura",
      line = "^Summoning all your influence%, you begin to verily radiate charisma%, creating an aura about yourself and those loyal to you%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "charismaticaura" },
  { id = "charismaticaura_up",
      line = "^You already exude a charismatic aura%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "charismaticaura up" },
  { id = "charismaticaura_off",
      line = "^Your posture relaxes as you allow your charismatic aura to drain away%, your mind feeling less strained%, though those loyal to you appear slightly disappointed%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "charismaticaura off" },
  { id = "charismaticaura_down",
      line = "^You already don%'t exude a charismatic aura%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "charismaticaura down" },
  { id = "charismaticaura_def",
      line = "^You are compellingly charismatic%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "charismaticaura" },
  { id = "sensuous",
      line = "^.- blows you a kiss%, as if that%'s what you asked for%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "mob is weak to seduction, immune to..." },
  { id = "greedy_fail",
      line = "^.- snorts in derision at you and shoves you away%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "immune to charity, greedy" },
  { id = "begging",
      line = "^You thrust your hand out to .- and beg shamelessly%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "begging" },
  { id = "supplication",
      line = "^Explaining your abject poverty%, you humbly request a little help from .-%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "charity" },
  { id = "charity_continue",
      line = "^.-%'s face drops and [sS]?[hH]e looks a little guilty%, but shakes [hH]%a+ head at you%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "continue" },
  { id = "charity_continue",
      line = "^.- looks up into the sky%, pretending you don%'t exist%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "continue" },
  { id = "charity_win",
      line = "^.- sighs dramatically and searches [hH]%a+ pockets%, looking for something to give you%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "charity win" },
  { id = "charity_end",
      line = "^.- keeps asking [hH]%a+self why [sS]?[hH]e considered giving so much away%, and pays you no attention%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "charity end" },
  { id = "empower",
      line = "^You compliment (.-) on [hH]%a+ outstanding intellect and physique%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "empower" },
  { id = "empower_brave",
      line = "^(.-) laughs and blushes%, giving you a friendly nudge%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "empowering" },
  { id = "empower_notbrave",
      line = "^(.-) ponders your words%, but then snorts arrogantly%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "empowering" },
  { id = "empower",
      line = "^You confide in (.-) how much you admire [hH]%a+ dazzling mental and physical skills%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "empower" },
  { id = "immune",
      line = "^(.-) tickles you%, obviously amused by your antics%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "cant influence" },
  { id = "empower",
      line = "^You sing the praises of the heroic exploits of (.-)%, recounting [hH]%a+ many incredible adventures%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "empower" },
  { id = "empower_win",
      line = "^(.-) puffs up [hH]%a+ chest and a crazy gleam enters [hH]%a+ eyes as [sS]?[hH]e vigorously agrees with you that [hH]%a+ intelligence and strength far surpass anyone else%'s%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "empower win" },
  { id = "empowered",
      line = "^(.-) is so caught up in admiring [hH]%a+ that [sS]?[hH]e barely notices you%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "empowered" },
  { id = "weaken",
      line = "^You tease (.-)%, ridiculing [hH]%a+ outlandish style and manners%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "weaken" },
  { id = "weaken_sigh",
      line = "^(.-) gives a dramatic sigh and politely edges away from you%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "continue" },
  { id = "weaken",
      line = "^Sniggering cruelly%, you mock (.-) about [hH]%a+ pathetic life%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "weaken" },
  { id = "weaken",
      line = "^Showing no mercy%, you spitefully deride (.-) about the complete worthlessness of [hH]%a+ existence%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "weaken" },
  { id = "weaken_win",
      line = "^(.-) breaks down and sobs%, telling you how true it is that [sS]?[hH]e is nothing but a pathetic fraud%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "weaken win" },
  { id = "weakened",
      line = "^(.-) keeps thumping [hH]%a+ on the head%, not hearing a word you say%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "weakened" },
  { id = "hallifax_accordance",
      line = "^Discerning the desires of (.-)%, you press [hH]%a+ to acknowledge that only in Hallifax will [sS]?[hH]e find accord with [hH]%a+ many needs%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "village special" },
  { id = "divert_fail",
      line = "^Your ego must be at full strength to divert%.$",
      action = function (i, tbl) influence_(i, tbl) end,
      notes = "divert failed" },
}
