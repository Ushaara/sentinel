-- totems

trigs = trigs or {}
trigs.combat = trigs.combat or {}
trigs.defs = trigs.defs or {}

trigs.combat.totems = {
  { id = "skunk",
      line = "^(%a+) turns around and squats%, spraying you with a noxious liquid%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "skunked" },
  { id = "crow",
      line = "^(%a+) caws like a crow%, giving you the primal urge to flee in terror%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "fear" },
  { id = "monkey_seize",
      line = "^(%a+) locks [hH]%a+ arms about you and carries you up into the trees%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "seized to tree level" },
  { id = "monkey_shove",
      line = "^(%a+) gives you a vicious shove and you tumble backwards and fall%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "shoved from trees" },
  { id = "visual_rock",
      line = "^(%a+) bows [hH]%a+ head as a layer of clay suddenly encases [hH]%a+ feet%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "rock" },
}

trigs.defs.totems = {
  { id = "bonded",
      line = "^You are already bonded with that totem spirit%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "already bonded" },
  { id = "release",
      line = "^You release the spirit of (%a+)%, silently thanking the spirit for bonding with you%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "release" },
  { id = "squirrel",
      line = "^You call upon the spirit of squirrel to provide sustenance for you%. You cannot stifle a giggle as you are tickled by tiny paws running over your skin%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "squirrel" },
  { id = "forage_nothing",
      line = "^You search carefully about your surroundings%, but alas can find nothing on which to feed%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "no result" },
  { id = "forage_found",
      line = "^You scamper about your surroundings%, and eventually collect a sizeable cluster of edible nuts and berries which you devour hungrily%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "foraged" },
  { id = "night",
      line = "^You call upon the spirit of mother night to hide you%. Her dark presence makes your skin crawl%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "night" },
  { id = "night_fail",
      line = "^It must be night to bond with Mother Night%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "daytime" },
  { id = "skunk",
      line = "^You call upon the spirit of skunk%. You wrinkle your nose as his musky presence envelops you%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "skunk" },
  { id = "sun",
      line = "^You call upon the spirit of sun and a warm ray of sunlight infuses you with confidence%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "sun" },
  { id = "sun_fail",
      line = "^It must be day to bond with Sun Spirit%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "night time" },
  { id = "rock",
      line = "^You call upon the spirit of the great rock to ground you to the earth%, and you feel your feet become encased in clay%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "rock" },
  { id = "rock_fail",
      line = "^You must be standing in the mountains to bond with Rock Spirit%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "not in mountains" },
  { id = "moon",
      line = "^You call upon the spirit of moon and a soft shaft of moonlight beams down upon you%, filling you with power%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "moon" },
  { id = "moon_fail",
      line = "^It must be night to bond with Moon Spirit%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "daytime" },
  { id = "crow",
      line = "^You call upon the spirit of crow and feel oily black feathers caress your skin%, making you shudder%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "crow" },
  { id = "tree",
      line = "^You call upon the spirit of tree to heal you%. A gentle breeze carries a rich and loamy scent which invigorates you%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "tree" },
  { id = "tree_fail",
      line = "^You must be in the presence of your commune%'s mystic tree to bond with Tree Spirit%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "not by trees" },
  { id = "groundhog",
      line = "^You call upon the spirit of groundhog to grant you the gift of burrowing%. Your nostrils fill with the scent of earth and a claw brushes your cheek gently%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "groundhog" },
  { id = "groundhog_taint",
      line = "^You call upon the spirit of groundhog to grant you the gift of burrowing%. Your nostrils fill with the scent of tainted earth%, and a sense of terror quickly pervades you%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "groundhog" },
  { id = "trout",
      line = "^You call upon the spirit of rainbow trout%, and a fine spray of water cools your skin%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "trout" },
  { id = "wolf",
      line = "^You call upon the spirit of wolf to give you courage%. As the power of Wolf infuses you%, you let out a howl of the wild%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "wolf" },
  { id = "wolf_courage",
      line = "^The courage of the wolf swells within you%, driving fear from your heart%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "shrugged fear" },
  { id = "wolf_scent",
      line = "^You scent at the air%, your skilled nose picking up the faint traces of others in the surrounding area%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "scent" },
  { id = "scented",
      line = "^You make out the scent of (%a+) coming from (.+)%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "scented" },
  { id = "bear",
      line = "^You call upon the spirit of bear and feel a powerful rush of strength course through your veins%. You let loose a vigorous roar of exhilaration%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "bear" },
  { id = "stag",
      line = "^You call upon the spirit of stag and your scalp itches as invisible antlers sprout from your head%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "stag" },
  { id = "monkey",
      line = "^You call upon the spirit of monkey and surrender yourself to a sudden urge to drag your knuckles on the ground and whoop%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "monkey" },
  { id = "horse",
      line = "^You call upon the spirit of horse and an electrifying surge of energy ripples through your legs%, forcing you to neigh loudly%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "horse" },
  { id = "river",
      line = "^You call upon the spirit of the river daughter and laugh joyously as water swirls over your body%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "river" },
  { id = "river_fail",
      line = "^You must be swimming in a river or fresh water lake to bond with River Spirit%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "not in fresh water" },
  { id = "snake",
      line = "^You call upon the spirit of snake and feel cool silky coils winding over your skin%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "snake" },
  { id = "nature",
      line = "^You call upon all the spirits of Nature%, and a whirlwind of power surrounds you%, briefly lifting you from the ground%. As every spirit embraces you%, you shudder and tremble in delight%.$",
      action = function (i, tbl) totems_(i, tbl) end,
      notes = "nature" },
}
