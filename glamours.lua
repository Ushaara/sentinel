-- glamours

trigs = trigs or {}
trigs.combat = trigs.combat or {}
trigs.defs = trigs.defs or {}

trigs.combat.glamours = {
  { id = "colourburst",
      line = "^(%a+) weaves a glamour of radiant prismatic colours%, dazzling you with a burst of (.-)%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "affs - scarlet red light:paralysis, vibrant orange hues:stupidity, bright yellow flashes:dementia, emerald green iridescence:epilepsy, incandescent blue striations:recklessness, deep indigo whorls:damage, lustrous violet swirls:dizziness" },
  { id = "colourspray_cast",
      line = "^(%a+) spreads [hH]%a+ hands wide and weaves a vibrant spray of prismatic colours that dance and swirl through the air in a riotous pandemonium of hues%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "room colourburst" },
  { id = "colourspray_afflict",
      line = "^Wild%, abstract shapes of (.-) splatter across your vision%, sending you reeling%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "room hit of colourspray" },
  { id = "fascinate",
      line = "^(%a+) weaves [hH]%a+ hands towards you and light erupts into fascinating patterns that overwhelm your senses%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "transfixed if don't see trueblind_stripped, affmsg: You are afflicted with transfix." },
  { id = "trueblind_stripped",
      line = "^Vision returns%, though you no longer see the world through the sixth sense%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "trueblind down, but not transfixed!"},
  { id = "transfixion_symptom",
      line = "^You are transfixed and cannot do that%. You must writhe to escape%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "transfixed" },
  { id = "rainbowpattern",
      line = "^(%a+) weaves a beautiful swirl of rainbow%-coloured lights%, casting them into alluring patterns of barely restrained imagery%. With a graceful gesture%, [sS]?[hH]e conducts the rainbow patterns to spin recklessly around you%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "periodic afflictions" },
  { id = "orange_rainbowpattern",
      line = "^Melting orange clocks seep across the ground as contorted animals march past%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "hallucinations" },
  { id = "red_rainbowpattern",
      line = "Bright red bubbles float by as your mind drifts from confusion%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "confusion" },
  { id = "green_rainbowpattern",
      line = "Abstract green blotches spin around you%, causing you to stumble%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "clumsiness" },
  { id = "yellow_rainbowpattern",
      line = "Glowing yellow bursts of light flash across your vision%, filling you with unsated desire%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "addiction" },
  { id = "blue_rainbowpattern",
      line = "^Vivid blue spirals spin wildly around you%, and suddenly you are seeing double%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "dizziness" },
  { id = "violet_rainbowpattern",
      line = "^Blinding violet lights flash maddeningly in front of your eyes%, which twitch uncontrollably%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "epilepsy" },
  { id = "indigo_rainbowpattern",
      line = "^Snaking vines of dark indigo creep across your skin%, holding you tight%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "paralysis" },
  { id = "rainbowpattern_2",
      line = "^Blood drips from your nose as the rainbow lights swirl around you in a maddening frenzy%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "accompanies all colour lines" },
  { id = "rainbowpattern_cleared",
      line = "^You heave a sigh of relief as the beautiful and maddening rainbow patterns that swirl feverishly around you fade away in a multi%-coloured smoke%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "rainbow pattern is over" },
  { id = "flare",
      line = "^(%a+) weaves [hH]%a+ hands and fountains of dazzling light flare across your vision%, erupting in novas of colour that burn into your eyes%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "afterimage if following line" },
  { id = "flare_2",
      line = "^A dazzling orange afterimage burns into your sight%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "afterimage" },
  { id = "flare_afterimage",
      line = "^Dazzling lights flash across your vision%, leaving you with naught but a fading orange afterimage%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "can't put up trueblind" },
  { id = "afterimage_cleared",
      line = "^The dazzling afterimage fades from your vision%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "can re-raise trueblind" },
  { id = "fireworks",
      line = "^(%a+) claps [hH]%a+ hands together%, and a fountain of coloured light leaps into the air%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "fireworks, woo!"},
  { id = "fireworks_2",
      line = "^You are too close to the fireworks and are caught in the blazing explosion%!$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "ablaze"},
  { id = "mesmerize",
      line = "^(%a+) weaves a soothing%, mesmerizing glamour around you%. The gentle%, soft lights are hypnotic to watch%, and soon you find your eyelids growing heavy%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "sleep attack, TYPO CHECK" },
  { id = "hypnoticpattern",
      line = "^(%a+) weaves the light into a shifting net of bewitching lights that dance around you in hypnotic patterns%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "periodic off equilibrium" },
  { id = "hypnoticpattern_tick",
      line = "^Glowing lights swirl around you in a slow%, graceful dance of hypnotic patterns%, disrupting your concentration%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "off equilibrium" },
  { id = "hypnoticpattern_cleared",
      line = "^The hypnotic lights that dance around you in beguiling patterns suddenly dissipate%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "hypnotic pattern cleared" },
  { id = "lightspray",
      line = "^(%a+) spreads [hH]%a+ hands wide and weaves a dancing morass of flickering%, coloured light about [hH]%a+%. With a clap%, [sS]?[hH]e sends it spraying outwards%, the light congealing into a wave of technicoloured flames that rush over you with a cool sensation%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "lightspray room" },
  { id = "lightspray_2",
      line = "^As the illusory flames wash over you some begin to cling%, illuminating your figure%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "illuminated" },
  { id = "colourmaelstrom",
      line = "^The maelstrom of rainbow colours whips violently around%, slamming (.-) into you%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "room hit" },
  { id = "deadlypattern",
      line = "^(%a+) traces blasphemous patterns in the air with [hH]%a+ finger%, weaving a deadly glamour that constricts tightly around you%, unraveling your defenses%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "def_strip" },
  { id = "maze",
      line = "^(%a+) deftly traces the pattern of a vast%, labyrinthine maze%, too convoluted to follow with your eye%. Sweat drips down [hH]%a+ brow as the maze bursts into vibrant reality and vanishes%, yet the powerful vortex left in its wake sucks you violently into its depths%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "eek! you got mazed!" },
  { id = "maze_2",
      line = "^As the illusory maze fades away%, you are buffeted by screaming streaks of colour which leave you disoriented and feeling sick%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "gives four of: vestiphobia, pacified, impatience, hypochondria, masochism, confusion, addiction, hallucinations, hypersomnia, shyness, gluttonous, lonely, likely more" },
}

trigs.defs.glamours = {
  { id = "colourburst",
      line = "^Tou weave a glamour of radiant prismatic colours%, dazzling (%a+) with a burst of (.-)%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "colourburst" },
  { id = "glamour",
      line = "^You weave the light around you in intricately complex patterns%, conjuring a glamour of (%a+) around yourself%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "glamour" },
  { id = "glamour_up",
      line = "^You are unable to weave one glamour atop another that already exists%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "glamour up" },
  { id = "glamour_down",
      line = "^Your glamour of being (%a+) dissolves%, revealing your identity%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "glamour down" },
  { id = "glamour_def",
      line = "^You have taken on a glamour of (%a+)%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "def line" },
  { id = "nature",
      line = "^You weave a glamour around yourself and shape it into a rock%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "nature glamour" },
  { id = "nature_drop",
      line = "^Your glamour of being a rock fades away%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "nature drop" },
  { id = "statue",
      line = "^You weave a glamour around yourself%, coating yourself in an illusory sheaf of marble%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "statue" },
  { id = "statue_drop",
      line = "^Your glamour of being a statue fades away%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "statue drop" },
  { id = "illusoryself",
      line = "^You weave an impossibly complex glamour of light%, producing an unerring replica of yourself that floats eerily around you and prevents your precise location from being easily determined%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "illusoryself" },
  { id = "illusoryself_up",
      line = "^You are already protected by an illusory glamour of yourself%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "illusoryself up" },
  { id = "illusoryself_absorb",
      line = "^Your illusory doppleganger completely absorbs the damage%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "illusoryself absorbed damage" },
  { id = "illusoryself_down",
      line = "^Your illusory glamour you have woven of yourself melts away%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "illusoryself down" },
  { id = "illusoryself_none",
      line = "^You do not have an illusory doppleganger%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "no illusoryself" },
  { id = "illusoryself",
      line = "^You sense that your illusory doppelganger has (%d+) health%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "illusoryself" },
  { id = "illusoryself_def",
      line = "^You are accompanied by an illusory glamour%.$",
      action = function (i, tbl) glamours_(i, tbl) end,
      notes = "def line" },
}
